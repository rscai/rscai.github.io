<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>A List of Prime Numbers | Ray’s Blog</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="A List of Prime Numbers" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Problem" />
<meta property="og:description" content="Problem" />
<meta property="og:site_name" content="Ray’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-10-13T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="A List of Prime Numbers" />
<script type="application/ld+json">
{"description":"Problem","@type":"BlogPosting","headline":"A List of Prime Numbers","dateModified":"2019-10-13T00:00:00+00:00","datePublished":"2019-10-13T00:00:00+00:00","url":"/2019/10/Python99-P204-a-List-of-Prime-Numbers","mainEntityOfPage":{"@type":"WebPage","@id":"/2019/10/Python99-P204-a-List-of-Prime-Numbers"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>

    <header>
      <div class="container">
        <a id="a-title" href="/">
          <h1>Ray's Blog</h1>
        </a>
        <h2>Sr. Developer</h2>

        <section id="downloads">
          
          <a href="" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <small>13 October 2019</small>
<h1>A List of Prime Numbers</h1>

<p class="view">by </p>

<div class="sect1">
<h2 id="problem">Problem</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
Given a range of integers by its lower and upper limit, construct a list of all prime numbers in that range.
</blockquote>
</div>
</div>
</div>
<div class="sect1">
<h2 id="test">Test</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">from</span> <span class="nn">python99.arithmetic.p204</span> <span class="kn">import</span> <span class="n">prime</span>

<span class="k">def</span> <span class="nf">test_prime</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">prime</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">7</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">prime</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">11</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="mi">19</span><span class="p">]</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="resolution">Resolution</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="c1"># A list of prime numbers
# Given a range of integers by its lower and upper limit, construct a list of all prime numbers in that range
</span><span class="kn">from</span> <span class="nn">python99.arithmetic.p201</span> <span class="kn">import</span> <span class="n">is_prime</span>

<span class="k">def</span> <span class="nf">prime</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">prime_generator</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">)]</span>

<span class="k">def</span> <span class="nf">prime_generator</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
            <span class="k">yield</span> <span class="n">num</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="iterator">Iterator</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>An iterable object is an object that implements <em>iter</em>, which is expected to return an iterator object.</p>
</div>
<div class="paragraph">
<p>An iterator is an object that implements next, which is expected to return the next element of the iterable object that returned it, and raise a StopIteration exception when no more elements are available.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; https://wiki.python.org/moin/Iterator
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="generator">Generator</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
Generator functions allow you to declare a function that behaves like an iterator, i.e. it can be used in a for loop.
</blockquote>
<div class="attribution">
&#8212; https://wiki.python.org/moin/Generators
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/generated_diagrams/diag-b3eaf32be42b4bf96ca9c9cb64e0d07b.png" alt="Diagram" width="154" height="335">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="yield-expressions">Yield expressions</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
The yield expression is used when defining a generator function or an asynchronous generator function and thus can only be used in the body of a function definition. Using a yield expression in a function’s body causes that function to be a generator, and using it in an async def function’s body causes that coroutine function to be an asynchronous generator.
</blockquote>
<div class="attribution">
&#8212; https://docs.python.org/3.7/reference/expressions.html#yieldexpr
</div>
</div>
<div class="paragraph">
<p>Here it converts function <code>prime_generator</code> to a <strong>generator</strong> by <code>yield expression</code>. The difference between <strong>Generator</strong> and <strong>List</strong> and other <strong>Sequence</strong> is: elements of generator is created when accessed; but elements of List is created when defined.</p>
</div>
<div class="paragraph">
<p>Take below code as an example, <code>prime_list</code> returns when found all prime numbers frim range. It found that, it firstly executed all code of <code>prime_list</code> (Check 1, Check 2, &#8230;&#8203;, Check 10), then executed <code>for x in prime_list(1, 10)</code> loop (Iterate 2, Iterate 3, &#8230;&#8203;, Iterate 7).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">from</span> <span class="nn">python99.arithmetic.p201</span> <span class="kn">import</span> <span class="n">is_prime</span>

<span class="k">def</span> <span class="nf">prime_list</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Check "</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"Found prime "</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
            <span class="n">result</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">prime_list</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Iterate "</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Console output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Check 2
Found prime 2
Check 3
Found prime 3
Check 4
Check 5
Found prime 5
Check 6
Check 7
Found prime 7
Check 8
Check 9
Check 10
Iterate 2
Iterate 3
Iterate 5
Iterate 7</pre>
</div>
</div>
<div class="paragraph">
<p>Now check below code, <code>prime_generator</code> return result by <code>yield</code>, it makes <code>primge_genrator</code> as a generator. It found that, <code>prime_generator</code> does not create all elements before <code>for x in prime_generator(2, 10)</code>. Instead, create element when access by outer (call <code>next()</code>). For example, when outer accesses first element, it check numbers one by one, return first found prime number.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="python"><span class="kn">from</span> <span class="nn">python99.arithmetic.p201</span> <span class="kn">import</span> <span class="n">is_prime</span>

<span class="k">def</span> <span class="nf">prime_generator</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">num</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">lower</span><span class="p">,</span> <span class="n">upper</span><span class="o">+</span><span class="mi">1</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"Check "</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">is_prime</span><span class="p">(</span><span class="n">num</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="s">"Found prime "</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">num</span><span class="p">))</span>
            <span class="k">yield</span> <span class="n">num</span>

<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">prime_generator</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"Iterate "</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">x</span><span class="p">))</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Console output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Check 2
Found prime 2
Iterate 2
Check 3
Found prime 3
Iterate 3
Check 4
Check 5
Found prime 5
Iterate 5
Check 6
Check 7
Found prime 7
Iterate 7
Check 8
Check 9
Check 10</pre>
</div>
</div>
<div class="paragraph">
<p>In case of only requesting one resolution, using generator could eliminate unnecessary effort.</p>
</div>
</div>
</div>


  <small>tags: <em>python</em> - <em>python99</em> - <em>arithmetic</em> - <em>prime</em></small>


      </section>
    </div>

    
  </body>
</html>
