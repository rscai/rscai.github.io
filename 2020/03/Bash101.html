<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=">

<!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Bash 101 | Ray’s Blog</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Bash 101" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Overview" />
<meta property="og:description" content="Overview" />
<meta property="og:site_name" content="Ray’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2020-03-08T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Bash 101" />
<script type="application/ld+json">
{"description":"Overview","@type":"BlogPosting","headline":"Bash 101","dateModified":"2020-03-08T00:00:00+00:00","datePublished":"2020-03-08T00:00:00+00:00","url":"/2020/03/Bash101","mainEntityOfPage":{"@type":"WebPage","@id":"/2020/03/Bash101"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

  </head>

  <body>

    <header>
      <div class="container">
        <a id="a-title" href="/">
          <h1>Ray's Blog</h1>
        </a>
        <h2>Sr. Developer</h2>

        <section id="downloads">
          
          <a href="" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <small>8 March 2020</small>
<h1>Bash 101</h1>

<p class="view">by </p>

<div class="sect1">
<h2 id="overview">Overview</h2>
<div class="sectionbody">
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>A Unix shell is a command-line interpreter or shell that provides a command line user interface for Unix-like operating systems. The shell is both an interactive command language and a scripting language, and is used by the operating system to control the execution of the system using shell scripts.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Unix shell<br>
<cite>https://en.wikipedia.org/wiki/Unix_shell</cite>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="hello-world">Hello World</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="title">hello_world.sh</div>
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c">#!/bin/bash</span>
<span class="nb">read</span> <span class="nt">-p</span> <span class="s2">"Your Name? "</span> name

<span class="nb">echo</span> <span class="s2">"Hello World </span><span class="nv">$name</span><span class="s2">!"</span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nb">chmod </span>a+x ./hello_world.sh
bash-3.2<span class="nv">$ </span>./hello_world.sh
Your Name? Mike
Hello World Mike!
bash-3.2<span class="err">$</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="programming-paradigm">Programming Paradigm</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bash script is an imperative, procedural, scripting programming language.</p>
</div>
<div class="sect2">
<h3 id="procedural-programming">Procedural Programming</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Procedural programming is a programming paradigm, derived from structured programming,[citation needed] based on the concept of the procedure call. Procedures, also known as routines, subroutines, or functions, simply contain a series of computational steps to be carried out.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; Procedural Programming<br>
<cite>https://en.wikipedia.org/wiki/Procedural_programming</cite>
</div>
</div>
<div class="paragraph">
<p>The essence procedural programming is Data and Procedure.</p>
</div>
<div class="paragraph">
<p>Bash implements Data in Variable, Procedure in Function.</p>
</div>
<div class="sect3">
<h4 id="variables">Variables</h4>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Unlike many other programming languages, Bash does not segregate its variables by "type." Essentially, Bash variables are character strings, but, depending on context, Bash permits arithmetic operations and comparisons on variables. The determining factor is whether the value of a variable contains only digits.</p>
</div>
</blockquote>
<div class="attribution">
&#8212; https://www.tldp.org/LDP/abs/html/untyped.html
</div>
</div>
<div class="paragraph">
<p>Basically, Bash is dynamic typing. Variable could be assigned any type of value. Additionally, it does implicitly type conversion based on context.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash">bash-3.2<span class="nv">$ a</span><span class="o">=</span>12 <span class="c"># assign integer value to variable a</span>
bash-3.2<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$a</span> <span class="c"># variable a is referring integer value</span>
12
bash-3.2<span class="nv">$ a</span><span class="o">=</span>string <span class="c"># assign string value to vairable a</span>
bash-3.2<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$a</span> <span class="c"># variable a is referring string value</span>
string
bash-3.2<span class="nv">$ b</span><span class="o">=</span>23 <span class="c"># assign integer value to variable a</span>
bash-3.2<span class="nv">$ </span><span class="nb">echo</span> <span class="nv">$a</span>+<span class="nv">$b</span> <span class="c"># convert integer value to string value implicitly when add string by integer</span>
string+23</code></pre>
</div>
</div>
<div class="sect4">
<h5 id="variable-assignment-and-substitution">Variable Assignment and Substitution</h5>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="variable-kind">Variable Kind</h4>
<div class="paragraph">
<p>Int bash, there are three kinds of variables:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Local Variables, variables visible only within a code block or function</p>
</li>
<li>
<p>Environment Variables, variables which affect the behavior of the shell and user interface</p>
</li>
<li>
<p>Positional Variables, arguments passed to the script from the command line: <code>$0, $1, $2, $3 &#8230;&#8203;</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="value-type">Value Type</h4>
<div class="paragraph">
<p>Bash built in value types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>numeric</p>
</li>
<li>
<p>string</p>
</li>
<li>
<p>array</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="numeric">Numeric</h5>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
<div class="sect4">
<h5 id="string">String</h5>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
<div class="sect4">
<h5 id="array">Array</h5>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="function">Function</h3>
<div class="paragraph">
<p>Function is defined by keyword <code>function</code>. It can not define arguments in function signature, but it is still able to pass and refer arguments. Arguments could be referred by positional variables <code>$1, $2, $3, &#8230;&#8203;</code> in function scope. The positional variable <code>$0</code> is function name, arguments start at <code>$1</code>. Function is not able to return actual value, but it could simulate <strong>return</strong> by <code>echo</code>.</p>
</div>
<div class="paragraph">
<p>Function example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c">#!/bin/bash</span>

factorial<span class="o">()</span>
<span class="o">{</span>
    <span class="k">if</span> <span class="o">((</span> <span class="nv">$1</span> &lt;<span class="o">=</span> 1 <span class="o">))</span><span class="p">;</span> <span class="k">then
        </span><span class="nb">echo </span>1
    <span class="k">else
        </span><span class="nv">last</span><span class="o">=</span><span class="si">$(</span>factorial <span class="k">$((</span> <span class="nv">$1</span> <span class="o">-</span> <span class="m">1</span> <span class="k">))</span><span class="si">)</span>
        <span class="nb">echo</span> <span class="k">$((</span> <span class="nv">$1</span> <span class="o">*</span> last <span class="k">))</span>
    <span class="k">fi</span>
<span class="o">}</span>
factorial <span class="nv">$1</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="control-flow">Control Flow</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="branching">Branching</h3>
<div class="paragraph">
<p>There are two approaches to implement branching in Bash script:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>if/then</p>
</li>
<li>
<p>case</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ifthen">if/then</h4>
<div class="paragraph">
<p>if/then is a two way branching (if/then is called <strong>test</strong> most time). The form of if/then is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="k">if</span> <span class="o">[</span> condition <span class="o">]</span>
<span class="k">then
    </span><span class="nb">command
</span><span class="k">else
   </span><span class="nb">command
</span><span class="k">fi</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If condition is <code>true</code>, it executes <code>then</code> branch; if condition is <code>false</code>, it executes <code>else</code> branch. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="k">if</span> <span class="o">[</span> <span class="nv">$1</span> <span class="nt">-lt</span> <span class="s2">"10"</span> <span class="o">]</span>
<span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"input </span><span class="nv">$1</span><span class="s2"> is less than 10"</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"input </span><span class="nv">$1</span><span class="s2"> is not less than 10"</span>
<span class="k">fi</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>if/then could nest if/then, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="k">if</span> <span class="o">[</span> <span class="nv">$1</span> <span class="nt">-lt</span> <span class="s2">"10"</span> <span class="o">]</span>
<span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"input </span><span class="nv">$1</span><span class="s2"> is less than 10"</span>
<span class="k">elif</span> <span class="o">[</span> <span class="nv">$1</span> <span class="nt">-lt</span> <span class="s2">"20"</span> <span class="o">]</span>
<span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"input </span><span class="nv">$1</span><span class="s2"> is not less than 10 but less than 20"</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"input </span><span class="nv">$1</span><span class="s2"> is not less than 20"</span>
<span class="k">fi</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="case">case</h4>
<div class="paragraph">
<p>case is a multiple branching. The form is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="k">case</span> <span class="s2">"</span><span class="nv">$variable</span><span class="s2">"</span> <span class="k">in

</span>condition1<span class="p">)</span>
command1
<span class="p">;;</span>

condition2<span class="p">)</span>
command2
<span class="p">;;</span>

<span class="k">esac</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="k">case</span> <span class="nv">$1</span> <span class="k">in</span>
    <span class="s2">"10"</span><span class="p">)</span>
        <span class="nb">echo</span> <span class="s2">"input </span><span class="nv">$1</span><span class="s2"> is 10"</span>
        <span class="p">;;</span>
    <span class="s2">"20"</span><span class="p">)</span>
        <span class="nb">echo</span> <span class="s2">"input </span><span class="nv">$1</span><span class="s2"> is 20"</span>
        <span class="p">;;</span>
    <span class="s2">"30"</span><span class="p">)</span>
        <span class="nb">echo</span> <span class="s2">"input </span><span class="nv">$1</span><span class="s2"> is 30"</span>
        <span class="p">;;</span>
    <span class="k">*</span><span class="p">)</span>
        <span class="nb">echo</span> <span class="s2">"input </span><span class="nv">$1</span><span class="s2"> other than 10, 20 or 30"</span>
<span class="k">esac</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="loops">Loops</h3>
<div class="paragraph">
<p>A loop is a block code that iterates a list of commands as long as the loop control condition is ture.</p>
</div>
<div class="paragraph">
<p>There are three approaches to implement loop in Bash script:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>for loop</p>
</li>
<li>
<p>while</p>
</li>
<li>
<p>until</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="for-loop">for loop</h4>
<div class="paragraph">
<p>The form of <strong>for loop</strong> is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="k">for </span>arg <span class="k">in</span> <span class="o">[</span>list]
<span class="k">do
  </span>commands
<span class="k">done</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>During each pass through the loop, arg takes on the value of each successive variable in the list.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c">## for loop</span>
<span class="k">for </span>v <span class="k">in</span> <span class="s2">"zero"</span> <span class="s2">"one"</span> <span class="s2">"two"</span> <span class="s2">"three"</span> <span class="s2">"four"</span> <span class="s2">"five"</span>
<span class="k">do
    </span><span class="nb">echo</span> <span class="s2">"found value </span><span class="nv">$v</span><span class="s2">"</span>
<span class="k">done</span></code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>for loop</strong> also could inerate array:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nv">list</span><span class="o">=(</span> <span class="s2">"zero"</span> <span class="s2">"one"</span> <span class="s2">"two"</span> <span class="s2">"three"</span> <span class="s2">"four"</span> <span class="s2">"five"</span> <span class="o">)</span>

<span class="k">for </span>v <span class="k">in</span> <span class="s2">"</span><span class="k">${</span><span class="nv">list</span><span class="p">[@]</span><span class="k">}</span><span class="s2">"</span>
<span class="k">do
    </span><span class="nb">echo</span> <span class="s2">"found value </span><span class="nv">$v</span><span class="s2">"</span>
<span class="k">done</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="while">while</h4>
<div class="paragraph">
<p>The form of <strong>while</strong> is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="k">while</span> <span class="o">[</span> condition <span class="o">]</span>
<span class="k">do
  </span>commands
<span class="k">done</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This construct tests a condition on the top of loop, and keeps loop as long as that condition is <strong>true</strong>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c">## while</span>

<span class="nv">count</span><span class="o">=</span>0
<span class="nv">limit</span><span class="o">=</span>10

<span class="k">while</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$count</span><span class="s2">"</span> <span class="nt">-lt</span> <span class="s2">"</span><span class="nv">$limit</span><span class="s2">"</span> <span class="o">]</span>
<span class="k">do
    </span><span class="nb">echo</span> <span class="s2">"count is </span><span class="nv">$count</span><span class="s2">, has not reached limit </span><span class="nv">$limit</span><span class="s2">"</span>
    <span class="o">((</span> count +<span class="o">=</span> 1 <span class="o">))</span>
<span class="k">done

</span><span class="nb">echo</span> <span class="s2">"count is </span><span class="nv">$count</span><span class="s2">, has reached limit </span><span class="nv">$limit</span><span class="s2">"</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="until">until</h4>
<div class="paragraph">
<p>The form of <strong>until</strong> is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="k">until</span> <span class="o">[</span> condition <span class="o">]</span>
<span class="k">do
  </span>commands
<span class="k">done</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This construct tests for a condition on the top of a loop, and keeps loop as long as that condition is <strong>false</strong>.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c">## until</span>

<span class="nv">count</span><span class="o">=</span>0
<span class="nv">limit</span><span class="o">=</span>10

<span class="k">until</span> <span class="o">[</span> <span class="s2">"</span><span class="nv">$count</span><span class="s2">"</span> <span class="nt">-gt</span> <span class="s2">"</span><span class="nv">$limit</span><span class="s2">"</span> <span class="o">]</span>
<span class="k">do
    </span><span class="nb">echo</span> <span class="s2">"count is </span><span class="nv">$count</span><span class="s2">, has not reached limit </span><span class="nv">$limit</span><span class="s2">"</span>
    <span class="o">((</span> count +<span class="o">=</span> 1 <span class="o">))</span>
<span class="k">done

</span><span class="nb">echo</span> <span class="s2">"count is </span><span class="nv">$count</span><span class="s2">, has reached limit </span><span class="nv">$limit</span><span class="s2">"</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tests">Tests</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If file exists?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="c"># if file exists</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-e</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">]</span>
<span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2"> exists"</span>
<span class="k">else
    </span><span class="nb">echo</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2"> does not exist"</span>
<span class="k">fi</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If file older than?</p>
</div>
<div class="paragraph">
<p>TBD</p>
</div>
<div class="paragraph">
<p>Has file been changed recently?</p>
</div>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="batch-text-editing">Batch Text Editing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Bash itself is not capable of batck test editing. It&#8217;s commonly implemented by comandline tools <strong>sed</strong> and <strong>awk</strong>.</p>
</div>
<div class="sect2">
<h3 id="sed">Sed</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Sed is a non-interactive stream editor. It receives text input, whether from stdin or from a file, performs certain operations on specified lines of the input, one line at a time, then outputs the result to stdout or to a file.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="awk">Awk</h3>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Awk is a full-featured text processing language with a syntax reminiscent of C. While it possesses an extensive set of operators and capabilities, we will cover only a few of these here - the ones most useful in shell scripts.</p>
</div>
<div class="paragraph">
<p>Awk breaks each line of input passed to it into fields. By default, a field is a string of consecutive characters delimited by whitespace, though there are options for changing this. Awk parses and operates on each separate field. This makes it ideal for handling structured text files&#8201;&#8212;&#8201;especially tables&#8201;&#8212;&#8201;data organized into consistent chunks, such as rows and columns.</p>
</div>
</blockquote>
</div>
</div>
<div class="sect2">
<h3 id="batch-replace">Batch Replace</h3>
<div class="literalblock">
<div class="title">example.txt</div>
<div class="content">
<pre>It earns 1,000 in Q1, totally 5,000 in this year.
It earns 1,500 in Q2, totally 5,000 in this year.
It earns 1,750 in Q3, totally 5,000 in this year.
It earns 750 in Q4, totally 5,000 in this year.</pre>
</div>
</div>
<div class="paragraph">
<p>Replace all 'earns' by 'losts'.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><span class="nb">sed</span> <span class="s1">'s/earns/losts/g'</span> example.txt</code></pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>It losts 1,000 in Q1, totally 5,000 in this year.
It losts 1,500 in Q2, totally 5,000 in this year.
It losts 1,750 in Q3, totally 5,000 in this year.
It losts 750 in Q4, totally 5,000 in this year.</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="list-recent-changed-files">List Recent Changed Files</h3>
<div class="paragraph">
<p>TBD</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="reference">Reference</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.tldp.org/LDP/abs/html/index.html">Advanced Bash-Scripting Guide</a></p>
</li>
</ul>
</div>
</div>
</div>


  <small>tags: <em>bash</em> - <em>linux</em> - <em>script</em></small>


      </section>
    </div>

    
  </body>
</html>
